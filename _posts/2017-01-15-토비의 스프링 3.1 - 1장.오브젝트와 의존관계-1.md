---
layout: post
title: 토비의 스프링 3.1 - 1장.오브젝트와 의존관계-1
disqus: y
---

# 1장.오브젝트와 의존관계

## 0.preview
 * 스프링: 자바 엔터프라이즈 개발에 사용되는 애플리케이션 프레임워크.

## 1.초난감 DAO
 * DAO: Data Access Object. DB를 사용해 데이터를 조작하거나 조회하는 기능을 전담하는 Object.
 * JavaBean: 비주얼 툴에서 조작가능한 컴포넌트.
    - default 생성자
    - property : JavaBean이 노출하는 이름을 가진 속성. getter와 setter로 조회/수정.

## 2.DAO의 분리
### ① 관심사의 분리
	* 관심이 같은 것 -> 하나의 객체 or 친한 객체
	* 관심이 다른 것 -> 서로 영향을 주지 않도록 분리

### ② 리팩토링
  * 기존의 코드를 외부 동작방식에는 변화없이 내부구조를 변경/재구성하는 기술
  
### ③ 디자인 패턴
SW설계 시 특정 상황에서 자주 만나는 문제를 해결하기 위해 사용할 수 있는 재사용 가능한 솔루션.
=> 패턴의 대다수: 클래스 상속, 오브젝트 합성

* 템플릿 메소드 패턴: 상속을 통해 슈퍼클래스의 기능을 확장할 때 가장 많이 사용하는 가장 대표적인 방법.
	- 슈퍼클래스 : 변하지 않는 기능. 
	=> 추상 메소드 or 오버라이드 가능한 메소드를 정의해두고 이를 활용해 코드의 기본 알고리즘을 담고있는 템플릿 메소드 제작.

* 팩토리 메소드 패턴
	- 슈퍼클래스: 서브클래스에서 구현할 메소드를 호출해 필요한 타입의 오브젝트를 가져와 사용
	- 서브클래스: 다양한 방법으로 오브젝트를 생성하는 메소드를 재정의 가능
     
## 3.DAO의 확장

### ① 원칙과 패턴
* 개방 폐쇄 원칙(OCP): 클래스나 모듈은 확장에는 열려 있어야하고 변경에는 닫혀있어야 한다.
※ 객체지향 설계 원칙(SOLID)
	- SRP: 단일 책임 원칙
	- OCP: 개방 폐쇄 원칙
	- LSP: 리스코프 치환 원칙
	- ISP: 인터페이스 분리 원칙
	- DIP: 의존관계 역전 원칙
        
### ② 높은 응집도와 낮은 결합도
응집도↑ = 하나의 모듈, 클래스가 하나의 책임 또는 관심사에만 집중되어 있다는 뜻.
	* 높은 응집도: 변화가 일어날 때 해당 모듈에서 변하는 부분이 크다는 것으로 설명 가능.
	* 낮은 결합도: 다른 오브젝트와 관계를 유지하는 데, 최소한의 방법만 간접적인 형태로 제공.
		- 변화에 대응하는 속도↑, 구성이 깔끔, 확장하기에도 편리
		- 결합도: 하나의 오브젝트가 변경이 일어날 때에 관계를 맺고 있는 다른 오브젝트에게 변화를 요구하는 정도
	* 전략패턴: 자신의 기능 맥락에서 필요에 따라 변경이 필요한 알고리즘을 인터페이스를 통해 통쨀 외부로 분리시키고,
		이를 구현한 구체적인 알고리즘 클래스를 필요에 따라 바꿔서 사용할 수 있게 하는 디자인 패턴.

## 4.제어의 역전(Ioc)

### ① 오브젝트 팩토리
* 팩토리: 객체의 생성 방법을 결정하고 그렇게 만들어진 오브젝트를 돌려주는 클래스.
	
### ② 제어권의 이전을 통한 제어관계 역전
* 제어의 역전(Ioc): 제어 흐름의 개념을 거꾸로 뒤집는 것.
	- 엔트리 포인트를 제외하면 모든 오브젝트는 위임 받은 제어 권한을 갖는 특별한 오브젝트에 의해 결정되고 만들어진다.
		ex) 서블릿, 프레임워크
	- 프레임 워크와 라이브러리의 차이
	
		|프레임워크|라이브러리|
		|--------|--------|
		|프레임워크가 흐름을 주도하는 중에 개발자가 만든<br> 애플리케이션 코드를 사용하도록 하는 방식.|라이브러리를 사용하는 애플리케이션<br> 코드는 애플리케이션 흐름을 직접 제어.|

* IoC의 장점: 설계가 깔끔해지고 유연성이 증가하며 확장성이 좋아진다.
	
## 5.스프링의 IoC

### ①오브젝트 팩토리를 이용한 스프링 IoC
* 애플리케이션 컨텍스트와 설정정보
	- bean: 스프링이 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트.
		-> 스프링 빈은 스프링 컨테이너가 생성과 관계설정, 사용 등을 제어해주는 제어의 역전이 적용된 오브젝트를 가리키는 말.
	- bean Factory: 빈의 생성과 관계 설정 같은 제어를 담당하는 IoC오브젝트.
	
### ② 애플리케이션 컨텍스트의 동작방식
* 스프링의 애플리케이션 컨텍스트: 스프링의 가장 대표적인 오브젝트.
	- 오브젝트 팩토리 대신 애플리케이션 컨텍스트를 사용했을 때의 장점
	- 클라이언트는 구체적인 팩토리 클래스를 알 필요가 없다.
	- 애플리케이션 컨텍스트는 종합 IoC 서비스를 제공해준다.
	- 애플리케이션 컨텍스트는 빈을 검색하는 다양한 방법을 제공한다.
	
### ③ 스프링 IoC의 용어정리
* 빈(bean) : 스프링이 IoC방식으로 관리하는 오브젝트. 그중에서 스프링이 직접 그 생성과 제어를 담당하는 오브젝트.
* 빈 팩토리(bean Factory): 빈을 등록하고, 생성하고, 조회하고, 돌려주고, 그외에 부가적인 빈을 관리하는 기능 담당.<br> 보통은 이를 확장한 애플리케이션 컨텍스트를 이용.
* 애플리케이션 컨텍스트(Application Context): 빈팩토리를 확장한 IoC컨테이너. 스프링이 제공하는 각종 부가 기능을 추가.
* 설정정보/메타정보(Configuration metadata): IoC를 적요하기 위해 사용하는 메타정보. IoC컨테이너에 의해 관리되는 애플리케이션 오브젝트를 생성하고 구성할 때 사용.
* 컨테이너(IoC Container): 애플리케이션 컨텍스트나 빈팩토리.
* 스프링 프레임워크: IoC컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 주로 사용.

## 6.싱글톤 레지스트리와 오브젝트 스코프
※ 오브젝트의 동일성과 동등성

||동일성|동등성|
|----|----------|-----------|
|비교|== 연산자|equals()|
|존재 방식|하나의 오브젝트만 존재|두 개의 각기 다른 오브젝트가 메모리 상에 존재|

### ① 싱글통 레지스트리로서의 애플리케이션 컨텍스트
* 싱글톤 패턴의 한계		
	- private 생성자를 가지고 있기 때문에 상속할 수 없다.
	- 싱글톤은 테스트하기가 힘들다.
	- 서버환경에서는 싱글톤이 하나만 만들어지는 것을 보장하지 못한다.
	- 싱글톤의 사용은 전역상태를 만들 수 있기 때문에 바람직하지 못하다.
* 싱글톤 레지스트리: 스프링이 직접 싱글톤 형태의 오브젝트를 만들고 관리하는 기능.
	- 스테틱 메소드와 private 생성자를 사용해야 하는 비정상적인 클래스가 아니라 평범한 자바 클래스를 싱글톤으로 활용하게 해줌

### ② 싱글톤과 오브젝트 상태
* 싱글톤은 여러 스레드가 동시에 접근해 사용가능.
	- 상태정보를 내부에 가지고 있지 않은 무상태 방식으로 만들어져야함.

### ③스프링 빈의 스코프
* 빈의 스코프: 빈이 생성되고 존재하고, 적용되는 범위


__참고: 토비의 스프링 3.1__
